<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mis Favoritos</title>
<link rel="stylesheet" href="CSS/style.css">
<script src="JS/productos.js" defer></script>
<script src="JS/favoritos.js" defer></script>
</head>
<body>
    <nav class="navbar">
    <a href="index.html">Inicio</a>
    <a href="favoritos.html">Favoritos</a>
    <a href="perfumes.html">Perfumes</a>
    <a href="relojes.html">Relojes</a>
  </nav>

  <header>
    <h1>‚≠ê Mis Productos Favoritos</h1>
  </header>

  <section class="catalogo" id="lista-favoritos">
    <!-- Productos favoritos se insertar√°n aqu√≠ -->
  </section>

  <p id="vacio">A√∫n no tienes productos en favoritos.</p>

  <script>
    function cargarFavoritos() {
      const favoritos = JSON.parse(localStorage.getItem('favoritos')) || [];
      const contenedor = document.getElementById('lista-favoritos');
      const vacio = document.getElementById('vacio');
      contenedor.innerHTML = "";

      if (favoritos.length === 0) {
        vacio.style.display = "block";
        return;
      }
      vacio.style.display = "none";

      // Recorremos todas las categor√≠as para buscar los productos favoritos
      Object.values(productos).flat().forEach(p => {
        if (favoritos.includes(p.nombre)) {
          const div = document.createElement('div');
          div.classList.add('producto');
          div.innerHTML = `
            <img src="${p.img}" alt="${p.nombre}">
            <h2>${p.nombre}</h2>
            ${p.precio > 0 ? `<p>$${p.precio}.00</p>` : ""}
            ${p.precio > 0 ? `<a class="btn-wsp" href="https://wa.me/593963210127?text=Hola! Quiero comprar ${encodeURIComponent(p.nombre)}" target="_blank">Comprar</a>` : ""}
            <div class="btn-eliminar" data-nombre="${p.nombre}">üóë Eliminar</div>
          `;
          contenedor.appendChild(div);
        }
      });

      // Asignamos eventos para eliminar productos
      document.querySelectorAll(".btn-eliminar").forEach(btn => {
        btn.addEventListener("click", () => {
          const nombre = btn.getAttribute("data-nombre");
          let favoritos = JSON.parse(localStorage.getItem('favoritos')) || [];
          favoritos = favoritos.filter(item => item !== nombre);
          localStorage.setItem('favoritos', JSON.stringify(favoritos));
          cargarFavoritos();
        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      cargarFavoritos();
    });
  </script>
</body>
</html>
